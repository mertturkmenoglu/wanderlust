// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: assets.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

type BatchCreatePlaceAssetsParams struct {
	EntityType  string
	EntityID    string
	Url         string
	AssetType   string
	Description pgtype.Text
	Order       int32
}

type BatchCreateReviewAssetsParams struct {
	EntityType  string
	EntityID    string
	Url         string
	AssetType   string
	Description pgtype.Text
	Order       int32
}

const createReviewAsset = `-- name: CreateReviewAsset :one
INSERT INTO assets (
  entity_type,
  entity_id,
  url,
  asset_type,
  description,
  "order"
) VALUES (
  'review',
  $1,
  $2,
  $3,
  $4,
  $5
) RETURNING id, entity_type, entity_id, url, asset_type, description, created_at, updated_at, "order"
`

type CreateReviewAssetParams struct {
	EntityID    string
	Url         string
	AssetType   string
	Description pgtype.Text
	Order       int32
}

func (q *Queries) CreateReviewAsset(ctx context.Context, arg CreateReviewAssetParams) (Asset, error) {
	row := q.db.QueryRow(ctx, createReviewAsset,
		arg.EntityID,
		arg.Url,
		arg.AssetType,
		arg.Description,
		arg.Order,
	)
	var i Asset
	err := row.Scan(
		&i.ID,
		&i.EntityType,
		&i.EntityID,
		&i.Url,
		&i.AssetType,
		&i.Description,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Order,
	)
	return i, err
}

const findReviewLastAssetIndex = `-- name: FindReviewLastAssetIndex :one
SELECT
  COALESCE(MAX("order"), -1)
FROM
  public.assets
WHERE
  entity_id = $1 AND entity_type = 'review'
`

func (q *Queries) FindReviewLastAssetIndex(ctx context.Context, entityID string) (interface{}, error) {
	row := q.db.QueryRow(ctx, findReviewLastAssetIndex, entityID)
	var coalesce interface{}
	err := row.Scan(&coalesce)
	return coalesce, err
}
